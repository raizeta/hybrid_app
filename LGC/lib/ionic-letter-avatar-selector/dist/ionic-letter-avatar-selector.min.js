!function(e){e.module("ionicLetterAvatarSelector.constants",[]).constant("IONIC_LETTER_AVATAR_SELECTOR_ICONS",{"delete":ionic.Platform.isAndroid()?"ion-android-delete":"ion-ios-trash",finish:ionic.Platform.isAndroid()?"ion-android-arrow-back":"ion-ios-checkmark-empty"}).constant("IONIC_LETTER_AVATAR_SELECTOR_THEMES",{light:"#fff",stable:"#f8f8f8",positive:"#387ef5",calm:"#11c1f3",balanced:"#33cd5f",energized:"#ffc900",assertive:"#ef473a",royal:"#886aea",dark:"#444"}),e.module("ionicLetterAvatarSelector.values",[]).value("ionicLetterAvatarSelector",{header:void 0,selectionView:void 0}),e.module("ionicLetterAvatarSelector.decorators",[]).decorator("ionViewDirective",["$delegate","$document","$ionicHistory","$ionicLetterAvatarSelector","$ionicLetterAvatarSelectorConfig","$ionicNavBarDelegate","$state","ionicLetterAvatarSelector",function(t,n,i,r,o,a,c,s){var l=t[0];return l.compile=function(t){return t.addClass("pane"),t[0].removeAttribute("title"),function(t,l,d,f){function u(e,t){for(var n in m){var i=m[n];i.style&&(i.style.background=e,i.style.border=t)}}function v(){a.title(h),u(s.header.background,s.header.border),o.isAndroid&&A.css("margin-left","10px")}function g(){h||(h=i.currentTitle()),s.stateName||(s.stateName=c.current.name),a.title(r.count()),u(o.selectionColor,"none"),o.isAndroid&&A.css("margin-left","30px")}if(f.init(),o.isAndroid||o.isIos){var h,m=n[0].body.querySelectorAll(".bar-header"),A=e.element(n[0].body.querySelectorAll(".title"));s.header||(s.header={background:m[0].style.background,border:m[0].style.border}),t.$on(r.finished,v),t.$on(r.started,g),t.$on("$stateChangeStart",function(e,t,n,i){i.name===s.stateName&&r.active()&&r.finish(!0)}),t.$on("$ionicView.afterEnter",function(e,n){!o.finishOnStateChange&&n.stateName===s.stateName&&r.active()&&(t.$root.$broadcast(r.makeSelection),setTimeout(function(){a.title(r.count())},10))})}}},t}]).decorator("ionItemDirective",["$delegate","$ionicGesture","$ionicLetterAvatarSelector","$ionicLetterAvatarSelectorConfig","$ionicNavBarDelegate","IONIC_LETTER_AVATAR_SELECTOR_THEMES",function(t,n,i,r,o,a){var c=t[0];return c.compile=function(t,c){var s=e.isDefined(c.href)||e.isDefined(c.ngHref)||e.isDefined(c.uiSref),l=s||/ion-(delete|option|reorder)-button/i.test(t.html()),d=e.element(s?"<a></a>":"<div></div>"),f=e.isDefined(c.lettersOf),u=(r.isIos||r.isAndroid)&&e.isDefined(c.item);if(l||f){if(d.addClass("item-content"),(e.isDefined(c.href)||e.isDefined(c.ngHref))&&(d.attr("ng-href","{{$href()}}"),e.isDefined(c.target)&&d.attr("target","{{$target()}}")),d.append(t.contents()),t.addClass("item item-complex").append(d),l&&t.addClass("item-icon-right"),f){t.addClass("item-avatar-left");var v='<img id="img" ng-src="{{src}}" class="ionic-letter-avatar-selector-animate-img"';u&&(v+=' ng-click="select($event)"'),v+="/>",d.prepend(v)}}else t.addClass("item");return function(t,c,s){function l(e){e||(e=s.border||r.border),L.css("border",e)}function d(){for(var e="0123456789ABCDEF".split(""),t="#",n=0;6>n;n++)t+=e[Math.floor(16*Math.random())];return t}function v(e){t.$apply(function(){t.select(e)})}function g(){c.addClass("active"),L.addClass("ng-hide-add"),t.src=b,l("none")}function h(){c.removeClass("active"),L.removeClass("ng-hide-add"),t.src=C,l()}function m(t){if(u){t&&(t.preventDefault(),t.stopPropagation()),$=i.select(s.item,e.isUndefined(t)),$?g():h();var n=i.count();n>0&&o.title(n)}}function A(t,n,i,o,c){var s;if(t)s="âœ“",o=r.selectionColor,i||(i=1);else{if(i||(i=r.letterNumber),i)s=n.substr(0,i).toUpperCase();else{var l=n.split(" ");i=l.length,i>2&&(i=2),s="";for(var f=0;f<l.length;f++){var u=l[f];u.length>1&&s.length<2&&(s+=u.substr(0,1).toUpperCase())}}"random"===o?o=d():o||(o=r.background),a[o]&&(o=a[o])}c||(c=r.color),a[c]&&(c=a[c]);var v=30,g=e.element("<text></text>").attr({"text-anchor":"middle",y:"50%",x:"50%",dy:"0.35em","pointer-events":"auto",fill:c,"font-family":"HelveticaNeue-Light,Helvetica Neue Light,Helvetica Neue,Helvetica, Arial,Lucida Grande, sans-serif"}).html(s).css({"font-weight":400,"font-size":v-5*(i-1)+"px"}),h=e.element("<svg></svg>").attr({xmlns:"http://www.w3.org/2000/svg","pointer-events":"none",width:50,height:50}).css({width:"50px",height:"50px",background:o});h.append(g);var m=e.element("<div>").append(h.clone()).html();return"data:image/svg+xml;base64,"+window.btoa(unescape(encodeURIComponent(m)))}t.$href=function(){return s.href||s.ngHref},t.$target=function(){return s.target};var S=c[0].querySelector(".item-content");if(S&&t.$on("$collectionRepeatLeave",function(){S&&S.$$ionicOptionsOpen&&(S.style[ionic.CSS.TRANSFORM]="",S.style[ionic.CSS.TRANSITION]="none",$$rAF(function(){S.style[ionic.CSS.TRANSITION]=""}),S.$$ionicOptionsOpen=!1)}),f){var $,p=n.on("hold",v,c),C=A(!1,s.lettersOf,s.letterNumber,s.background,s.color),b=u?A(!0):null,L=e.element(c[0].querySelector("#img"));l(),t.src=C,t.select=m,t.$on("$destroy",function(){n.off(p,"hold",v)}),t.$on(i.finished,function(){$&&h()}),t.$on(i.makeSelection,function(){m()})}}},t}]),e.module("ionicLetterAvatarSelector.providers",[]).provider("$ionicLetterAvatarSelectorConfig",function(){var e,t="#387ef5",n="none",i="light",r=!1,o=ionic.Platform.isAndroid(),a="#A8A8A8",c=!1;return{setBackground:function(e){t=e},setBorder:function(e){n=e},setColor:function(e){i=e},setFinishOnStateChange:function(e){r=e},setLetterNumber:function(t){e=t},setSelectionAndroid:function(e){o=e},setSelectionColor:function(e){a=e},setSelectionIos:function(e){c=e},$get:function(){return{background:t,border:n,color:i,finishOnStateChange:r,isAndroid:o,isIos:c,letterNumber:e,selectionColor:a}}}}),e.module("ionicLetterAvatarSelector.directives",[]).directive("ilasButtonDelete",["$ionicLetterAvatarSelector","$ionicLetterAvatarSelectorConfig","IONIC_LETTER_AVATAR_SELECTOR_ICONS",function(e,t,n){return{restrict:"E",replace:!0,template:'<button class="button button-icon {{icon}}"ng-class="{\'ionic-letter-avatar-selector-icon-smaller\': isAndroid}"ng-show="selectionActive"</button>',link:function(i){i.isAndroid=t.isAndroid,i.icon=n.delete,i.$on(e.stateChanged,function(e,t){i.selectionActive=t})}}}]).directive("ilasButtonFinish",["$ionicLetterAvatarSelector","$ionicLetterAvatarSelectorConfig","IONIC_LETTER_AVATAR_SELECTOR_ICONS",function(e,t,n){return{restrict:"E",replace:!0,template:'<button class="button button-icon {{icon}}"ng-class="{\'ionic-letter-avatar-selector-icon-smaller\': isAndroid}"ng-show="selectionActive"ng-click="finish()"></button>',link:function(i){i.finish=e.finish,i.isAndroid=t.isAndroid,i.icon=n.finish,i.$on(e.stateChanged,function(e,t){i.selectionActive=t})}}}]),e.module("ionicLetterAvatarSelector.services",[]).factory("$ionicLetterAvatarSelector",["$rootScope",function(t){var n=this,i=[],r=!1;return n.started="ionicLetterAvatarSelector.started",n.finished="ionicLetterAvatarSelector.finished",n.stateChanged="ionicLetterAvatarSelector.stateChanged",n.makeSelection="ionicLetterAvatarSelector.makeSelection",n.active=function(){return i.length>0},n.finish=function(e){i.length>0&&!e&&(i=[]),t.$broadcast(n.finished),t.$broadcast(n.stateChanged,!1)},n.count=function(){return i.length},n.getData=function(){return i.forEach(function(t,n){i[n]=JSON.parse(t,function(t,n){return e.isString(n)&&/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}(?:\.\d*))(?:Z|(\+|-)([\d|:]*))?$/.exec(n)?new Date(n):n})}),i},n.select=function(e,o){var a=i.indexOf(e);if(!o){var c=i.length;-1===a?i.push(e):i.splice(a,1);var s=i.length;r=0===c&&1===s}return(r||o)&&(t.$broadcast(n.started),t.$broadcast(n.stateChanged,!0)),n.active()||(t.$broadcast(n.finished),t.$broadcast(n.stateChanged,!1)),-1!==i.indexOf(e)},n}]),e.module("ionicLetterAvatarSelector",["ionicLetterAvatarSelector.constants","ionicLetterAvatarSelector.decorators","ionicLetterAvatarSelector.directives","ionicLetterAvatarSelector.providers","ionicLetterAvatarSelector.services","ionicLetterAvatarSelector.values"])}(angular);